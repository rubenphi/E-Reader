"use strict";(self["webpackChunkE_Reader"]=self["webpackChunkE_Reader"]||[]).push([[781],{6781:(e,a,o)=>{o.r(a),o.d(a,{default:()=>k});var n=o(6252),i=o(3577);const l={class:"date"},u={class:"ion-padding"},t=["src"],s=["innerHTML"];function d(e,a,o,d,r,c){const m=(0,n.up)("ion-back-button"),g=(0,n.up)("ion-buttons"),p=(0,n.up)("ion-toolbar"),v=(0,n.up)("ion-header"),w=(0,n.up)("ion-icon"),f=(0,n.up)("ion-note"),k=(0,n.up)("ion-range"),I=(0,n.up)("ion-label"),_=(0,n.up)("ion-item"),z=(0,n.up)("ion-col"),y=(0,n.up)("ion-card"),T=(0,n.up)("ion-row"),b=(0,n.up)("ion-grid"),W=(0,n.up)("ion-content"),h=(0,n.up)("ion-page");return(0,n.wg)(),(0,n.j4)(h,null,{default:(0,n.w5)((()=>[(0,n.Wm)(v,{translucent:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(g,{slot:"start"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{text:e.getBackButtonText(),"default-href":"/"},null,8,["text"])])),_:1})])),_:1})])),_:1}),e.message?((0,n.wg)(),(0,n.j4)(W,{key:0,fullscreen:!0},{default:(0,n.w5)((()=>[(0,n.Wm)(_,null,{default:(0,n.w5)((()=>[0==e.isPlaying&&e.message.audio?((0,n.wg)(),(0,n.j4)(w,{key:0,onClick:a[0]||(a[0]=a=>e.toggleAudio()),icon:e.play,color:"primary"},null,8,["icon"])):(0,n.kq)("",!0),1==e.isPlaying&&e.message.audio?((0,n.wg)(),(0,n.j4)(w,{key:1,onClick:a[1]||(a[1]=a=>e.toggleAudio()),icon:e.pause,color:"primary"},null,8,["icon"])):(0,n.kq)("",!0),(0,n.Wm)(I,{class:"ion-text-wrap"},{default:(0,n.w5)((()=>[(0,n._)("h2",null,[(0,n.Uk)((0,i.zw)(e.message.fromName)+" ",1),(0,n._)("span",l,[e.message.audio?((0,n.wg)(),(0,n.j4)(f,{key:0},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.convertTime(e.audio.currentTime))+" /"+(0,i.zw)(0!=e.actualTime?e.convertTime(e.actualTime):"00:00"),1)])),_:1})):(0,n.kq)("",!0)])]),(0,n._)("h3",null,[(0,n.Uk)("Por: "),(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e.message.subject),1)])),_:1})]),e.message.audio?((0,n.wg)(),(0,n.j4)(k,{key:0,value:e.progress,pin:!1,onIonKnobMoveEnd:e.avance},null,8,["value","onIonKnobMoveEnd"])):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n._)("div",u,[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(T,null,{default:(0,n.w5)((()=>[(0,n.Wm)(z,{"size-xs":"1","size-s":"5","size-md":"5","size-lg":"5","size-xl":"5"}),(0,n.Wm)(z,{"size-xs":"10","size-s":"2","size-md":"2","size-lg":"2","size-xl":"2"},{default:(0,n.w5)((()=>[e.imagen?((0,n.wg)(),(0,n.j4)(y,{key:0},{default:(0,n.w5)((()=>[(0,n._)("img",{alt:"Silhouette of mountains",src:e.imagen},null,8,t)])),_:1})):(0,n.kq)("",!0)])),_:1}),(0,n.Wm)(z,{"size-xs":"1","size-s":"5","size-md":"5","size-lg":"5","size-xl":"5"})])),_:1})])),_:1}),(0,n._)("div",{class:"ion-padding",innerHTML:e.message.content},null,8,s)])])),_:1})):(0,n.kq)("",!0)])),_:1})}var r=o(2201),c=o(6672),m=o(8903),g=o(3614),p=o(2262);const v=(0,n.aZ)({name:"ViewMessagePage",data(){return{getBackButtonText:()=>{const e=window,a=e&&e.Ionic&&e.Ionic.mode;return"ios"===a?"Tu Biblioteca":""}}},setup(){var e,a,o,n;const i=(0,r.yj)(),l=(0,g.F)(parseInt(i.params.id,10)),u=(0,p.iH)(new Audio("data:audio/"+(null===l||void 0===l||null===(e=l.audio)||void 0===e?void 0:e.format)+";base64,"+(null===l||void 0===l||null===(a=l.audio)||void 0===a?void 0:a.content))),t=void 0!=(null===l||void 0===l?void 0:l.portada)?"data:image/"+(null===l||void 0===l||null===(o=l.portada)||void 0===o?void 0:o.format)+";base64,"+(null===l||void 0===l||null===(n=l.portada)||void 0===n?void 0:n.content):null,s=(0,p.iH)(!1),d=(0,p.iH)(100),v=(0,p.iH)(0),w=(0,p.iH)(!1),f=(0,p.iH)(0),k=(0,p.iH)(0);return(0,c.Yr)((async()=>{setInterval((function(){f.value=u.value.duration-u.value.currentTime,k.value=100*u.value.currentTime/u.value.duration,console.log(k.value)}),1e3)})),{message:l,toggleAudio(){u.value.paused?(u.value.play(),s.value=!0):(u.value.pause(),s.value=!1)},convertTime(e){const a=Math.floor(e/3600).toString().padStart(2,"0"),o=Math.floor(e%3600/60).toString().padStart(2,"0"),n=Math.floor(e%60).toString().padStart(2,"0");return a+":"+o+":"+n},imagen:t,actualTime:f,audioDuration:d,audio:u,playbackTime:v,isPlaying:s,avance({detail:e}){u.value.currentTime=u.value.duration*(e.value/100)},audioLoaded:w,pause:m.wOZ,progress:k,play:m.hYY}},components:{IonGrid:c.jY,IonRow:c.Nd,IonCol:c.wI,IonCard:c.PM,IonBackButton:c.oU,IonButtons:c.Sm,IonContent:c.W2,IonHeader:c.Gu,IonIcon:c.gu,IonItem:c.Ie,IonLabel:c.Q$,IonNote:c.uN,IonPage:c._i,IonRange:c.I_,IonToolbar:c.sr}});var w=o(3744);const f=(0,w.Z)(v,[["render",d],["__scopeId","data-v-1221c486"]]),k=f}}]);
//# sourceMappingURL=781.e431ee00.js.map